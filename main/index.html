<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" media="all" href="style/bootstrap.min.css">
    <link rel="stylesheet" media="all" href="style/style.css">


    <link href='https://fonts.googleapis.com/css?family=VT323' rel='stylesheet' type='text/css'>
    <title>Dungeon Hop</title>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand textshadow" href="#">Dungeon Hop</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <audio src="assets/sounds/background.mp3" loop autoplay>
                        <!-- credits to xDimebagx at freesound.org under creative commons licence-->
                        Your browser does not support the audio element.
                    </audio>
                </li>
                
                    <!-- <li class="player textshadow-s" id="player1"> PLAYER 1</li> -->
                <li><h5 class="textshadow-s"> Time: </h5></li>
                <li id="timer" class="timecode textshadow-s"><p>00:00</p></li>
                    <!--<li class="player textshadow-s" id="player2"> PLAYER 2</li>-->
                <button id="start" class="btn btn-default textshadow-s">Start</button>
                <button id="about" class="btn btn-default textshadow-s"><a href="about.html">How To ?</a></button>
                


            </ul>

        </div><!--/.nav-collapse -->
    </div>
</nav>
<!--body -->
<h1 class="centered-info textshadow" id="info-text"></h1>
<h1 id="player-label" class="player-label" style="visibility: hidden;">YOU</h1>


<!--script-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/bootbox.min.js"></script>
<script src="js/three.min.js"></script>
<script src="client/GameHandler.js"></script>
<script src="client/GameInstance.js"></script>
<script src="client/ServerInterface.js"></script>
<script src="client/Enemy.js"></script>
<script src="client/PlayerCamera.js"></script>
<script src="client/Player.js"></script>
<script src="client/Opponent.js"></script>
<script src="client/QEFLoader.js"></script>
<script src="client/ModelManager.js"></script>
<script src="client/ModelCreator.js"></script>
<script src="client/World.js"></script>
<script src="client/Chunk.js"></script>
<script src="client/Particles.js"></script>


<script src="js/socket.io.js"></script>

<script>
    var cookie = document.cookie;
    var entries = cookie.split(";");
    var lastIp = entries[0].split("=")[1];
    var lastName = "Random Player";
    var ip = null;
    var name="";
    console.log(entries);
    if(entries[1] != undefined) {
        lastName = entries[1].split("=")[1];
    }
    if (lastIp == "" || lastIp == null) {
        lastIp = "52.28.150.118:8080";
    }
   
    bootbox.prompt({
      title: "Please enter the server address. If you want to play on the official server, use 'os' as server address.",
      value: lastIp,
      callback: function(result) {
        if (result === null) {
           ip = lastIp;
        } else {
           ip = result;
          bootbox.prompt({
              title: "Please enter your player name",
              value: lastName,
              callback: function(result) {
                if (result === null) {
                   name = lastName;
                } else {
                   name = result;
                  startgame();
                }
              }
            });
        }

      }
    });
    function startgame(){
        if (ip != null) {
            ip = ip.split("!")[0];
            if(ip == "os"){
                ip = "52.28.150.118:8080";
            }
            document.cookie = "lastIp=" + ip;
            document.cookie = "lastName="+ name;
            GameHandler.init(ip,name);
            //DungeonHop.init(ip,name);
        }
        (function () {
            var script = document.createElement('script');
            script.onload = function () {
                var stats = new Stats();
                stats.domElement.style.cssText = 'position:fixed;left:0;top:0;z-index:10000';
                document.body.appendChild(stats.domElement);
                requestAnimationFrame(function loop() {
                    stats.update();
                    requestAnimationFrame(loop)
                });
            };
            script.src = '//rawgit.com/mrdoob/stats.js/master/build/stats.min.js';
            document.head.appendChild(script);
        })()
        }
</script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>

</body>
</html>